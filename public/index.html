<!DOCTYPE html>
<html lang="en">

<head>
    <title>Book Reader</title>

    <!-- common stuff for headers -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- CSS and scripts -->
    <link href='_css/style.css' rel="stylesheet" type='text/css' media="screen" />
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>
    <div id="app">
        <div class="topbar--container">
            <h1 class="topbar--title">{{headline}}</h1>
            <div class="topbar--button-strip">
                <button class="topbar--button" @click="toggleFullscreen()">Fullscreen</button>
                <button class="topbar--button" @click="bigPhotoMode = !bigPhotoMode;">{{bigPhotoMode?'Small Pages':'Big Pages'}}</button>
            </div>
        </div>
        <header class="header--container" >
            <h2 class="header--book-title" v-if="book">{{book.title}}<br /><span class="header--book-title__small">by {{book.author}}</span></h2>
            <h2 v-if="!book">Loading...</h2>
        </header>
        <main class="page--container" :class="{'page--container__big-photo-mode':bigPhotoMode}" v-if="book">
            <section class="page--single-container" v-for="page in pages" :id="`page-${page.id}`">
                <div class="page--tab">
                    <div class="page--tab-audio-controls" :class="[!page.hasAudio() ? 'page--tab-audio-controls__hidden':'']">
                        <button class="page--audio-button-wrapper" v-if="page.audioState === 'pause'" v-on:click="handlePlayClick(page.audio)"><img src="_img/icon-play.svg" :alt="`Play Page ${page.title} Audio`" class="page--audio-button page--audio-button__play"></button>
                        <button class="page--audio-button-wrapper" v-if="page.audioState === 'play'" v-on:click="handlePlayClick(page.audio)"><img src="_img/icon-pause.svg" :alt="`Pause Page ${page.title} Audio`" class="page--audio-button page--audio-button__pause"></button>
                        <button class="page--audio-button-wrapper page--audio-button-wrapper__restart" v-on:click="handleRestartClick(page.num)"><img src="_img/icon-restart.svg" :alt="`Restart Page ${page.title} Audio`" class="page--audio-button page--audio-button__restart"></button>
                    </div>
                    <div class="page--name">{{page.title}}</div>
                    <div class="page--loading-bar" v-if="page.hasAudio()"><div class="page--loading-bar-progress" :style="{transform: `scaleX(${page.audioProgress})`}"></div></div>
                </div>
                <img class="page--graphic" :src="page.imgSrc" alt="" loading="lazy" />
            </section>
        </main>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.0/howler.core.min.js" integrity="sha512-adYefSF5Yqrk6IfUEa40OrIDc2Mgc2tErcS3DAU+WyZqlr/1Kr/FoKcHSNOP9hNHbOQjOgGxga4Yp/sK5w0ZmQ==" crossorigin="anonymous"></script>
    <script src="_js/app.js" type="text/javascript"></script>
</body>

</html>
